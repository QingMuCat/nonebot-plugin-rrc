name: Publish Python ğŸ distributions ğŸ“¦ to PyPI
on:
  # å½“masteråˆ†æ”¯æœ‰pushæ—¶ï¼Œè§¦å‘action
  push: 
    branches:
    - master

jobs:
  deploy:
    name: publish python package to PYPI
    # æ­¤ä½œä¸šåœ¨ Linux ä¸Šè¿è¡Œ
    runs-on: ubuntu-latest

    steps:
    # æ­¤æ­¥éª¤ä½¿ç”¨ GitHub çš„ https://github.com/actions/checkout
    - uses: actions/checkout@v2
    
    # è®¾ç½®pythonç¯å¢ƒ
    # æ­¤æ­¥éª¤ä½¿ç”¨ GitHub çš„ https://github.com/actions/setup-python
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.11'
    
    # å®‰è£…ä¾èµ–
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install setuptools wheel twine
    
    # æ„å»ºå’Œå‘å¸ƒ
    - name: Build and Publish distribution ğŸ“¦ to PyPI
      env:
        TWINE_USERNAME: ${{ secrets.PYPI_USERNAME }}
        TWINE_PASSWORD: ${{ secrets.PYPI_PASSWORD }}
      run: |
        python setup.py sdist bdist_wheel
        twine upload dist/*